@page
@model InstPlusEntityFr.Pages.ProfilPrywatny.IndexModel
@{
}

@if (Model.errorMessage.Length > 0)
{
    <div class='alert alert-warning alert-dismissible fade show' role='alert'>
        <strong>@Model.errorMessage</strong>
        <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
    </div>
}

@if (!string.IsNullOrEmpty(Model.ZdjecieProfilowe))
{
    @if (Model.CzyVip)
    {
        <div class="image-container">
            <img class="img" id="previewImage" src=@Url.Content("~/ImgUploads/vip_mark.jpg") alt="Zdjecie profilowe" width="100" height="100" />
            <br />
        </div>
    }
    <div style="text-align: left">
        <div style="display: flex; align-items: center;">
            <div style="width: 150px; height: 150px; overflow: hidden; margin-right: 10px;">
                <img class="img" id="previewImage" src=@Url.Content(@Model.ZdjecieProfilowe) alt="Zdjecie profilowe" style="width: 100%; height: 100%; object-fit: cover;" />
            </div>
            <label class="display-6">@Model.LoginUzytkownika</label>
            @if (Model.CzyAdministrator)
            {
                <label class="display-8">   (ADMINISTRATOR)</label>
            }
        </div>
        @if (Model.CzyVip == false)
        {
            <div style="text-align: right">
                <form asp-page-handler="ZakupVipBtn">
                    <input type="submit" value="ZAKUP VIP >" asp-page-handler="ZakupVipBtn" />
                </form>
            </div>
        }
        <form asp-page-handler="ZmienZdjecie">
            <input type="submit" value="ZMIEŃ ZDJĘCIE PROFILOWE >" asp-page-handler="ZmienZdjecie" />
        </form>
        <br><br>
        <div>
            <label>O mnie:</label>
            <br>
        </div>
        <form asp-page-handler="ZmienOpisBtn">
            <textarea class="form-control" id="OpisUzytkownika" name="OpisUzytkownika" rows="3" cols="100">@Model.OpisUzytkownika</textarea>
            <input type="submit" value="ZMIEŃ OPIS >" asp-page-handler="ZmienOpisBtn" />
        </form>
        @if (Model.CzyAdministrator)
        {
            <br />
            <div style="text-align: right">
                <form asp-page-handler="WyswStatystykiBtn">
                    <input type="submit" value="WYŚWIETL RAPORTY >" asp-page-handler="WyswStatystykiBtn" />
                </form>
            </div>
        }
        <br />
        <table class='tabelaOpcji'>
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>obserwowani:</td>
                    <td>@Model.IloscObserwowanych</td>
                    <td>
                        <form asp-page-handler="WyswObserwowanychBtn">
                            <input type="submit" value="WYŚWIETL >" asp-page-handler="WyswObserwowanychBtn" />
                        </form>
                    </td>
                </tr>
                <tr>
                    <td>obserwujący:</td>
                    <td>@Model.IloscObserwujacych</td>
                    <td>
                        <form asp-page-handler="WyswObserwujacychBtn">
                            <input type="submit" value="WYŚWIETL >" asp-page-handler="WyswObserwujacychBtn" />
                        </form>
                    </td>
                </tr>
                <tr>
                    <td>utworzone posty:</td>
                    <td>@Model.IloscPostowZalogow</td>
                    <td>
                        <form asp-page-handler="WyswMojePostyBtn">
                            <input type="submit" value="WYŚWIETL >" asp-page-handler="WyswMojePostyBtn" />
                        </form>
                    </td>
                </tr>
                <tr>
                    <td>całkowita ilość polubień:</td>
                    <td>@Model.IloscPolubZalogow</td>
                </tr>
            </tbody>
        </table>
    </div>
}

<script>
    document.getElementById("OpisUzytkownika").addEventListener("keydown", function (e) {
        if (e.key === "Enter") {
            e.preventDefault();
            var currentValue = this.value;
            this.value = currentValue + "\n";
        }
    });
</script>
